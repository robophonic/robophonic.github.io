<?php$managers = array(  [  	'id'  => 534267,  	'tag' => 'DM (Nastya), GoQAOnline3Test'  ],  [  	'id'  => 492957,  	'tag' => 'DM (Olena), GoQAOnline3Test'  ],  [    'id'  => 534273,    'tag' => 'DM (Masha), GoQAOnline3Test'  ],  [  	'id'  => 623061,  	'tag' => 'DM (Sasha), GoQAOnline3Test'  ]);$dm_num = file_get_contents('dm_num');if (empty($dm_num)) $dm_num = 0;$dm_id = $managers[$dm_num]['id'];$tag_id = $managers[$dm_num]['tag'];$dm_num++;if ($dm_num > count($managers) - 1) $dm_num = 0;file_put_contents('dm_num', $dm_num);$lead = array(  'name'=> 'GoQAOnline3Test',  'status_id' => 8622328,  'responsible_user_id' => $dm_id,  'tags' => $tag_id, #Теги);$set = array();$set['request']['leads']['add'][] = $lead;#Формируем ссылку для запроса$link='https://'.$subdomain.'.amocrm.ru/private/api/v2/json/leads/set';$curl=curl_init(); #Сохраняем дескриптор сеанса cURL#Устанавливаем необходимые опции для сеанса cURLcurl_setopt($curl,CURLOPT_RETURNTRANSFER,true);curl_setopt($curl,CURLOPT_USERAGENT,'amoCRM-API-client/1.0');curl_setopt($curl,CURLOPT_URL,$link);curl_setopt($curl,CURLOPT_CUSTOMREQUEST,'POST');curl_setopt($curl,CURLOPT_POSTFIELDS,json_encode($set));curl_setopt($curl,CURLOPT_HTTPHEADER,array('Content-Type: application/json'));curl_setopt($curl,CURLOPT_HEADER,false);curl_setopt($curl,CURLOPT_COOKIEFILE,dirname(__FILE__).'/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__curl_setopt($curl,CURLOPT_COOKIEJAR,dirname(__FILE__).'/cookie.txt'); #PHP>5.3.6 dirname(__FILE__) -> __DIR__curl_setopt($curl,CURLOPT_SSL_VERIFYPEER,0);curl_setopt($curl,CURLOPT_SSL_VERIFYHOST,0);$out=curl_exec($curl); #Инициируем запрос к API и сохраняем ответ в переменную$code=curl_getinfo($curl,CURLINFO_HTTP_CODE);CheckCurlResponse($code);/** * Данные получаем в формате JSON, поэтому, для получения читаемых данных, * нам придётся перевести ответ в формат, понятный PHP */$Response=json_decode($out,true);$Response=$Response['response']['leads']['add'];$lead_id = $Response[0]['id'];